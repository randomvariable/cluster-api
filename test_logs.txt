source ./scripts/fetch_ext_bins.sh; fetch_tools; setup_envs; hack/tools/bin/ginkgo -skipPackage e2e,infrastructure/docker -failFast -progress -race -stream -nodes 1 test -v ./... 
[1;33msetting up kubebuilder-tools@1.16.4 env vars[0m
Will skip:
  ./test/e2e
  ./test/infrastructure/docker/api/v1alpha3
  ./test/infrastructure/docker/cloudinit
  ./test/infrastructure/docker/controllers
=== RUN   TestFuzzyConversion
=== RUN   TestFuzzyConversion/for_Cluster
=== RUN   TestFuzzyConversion/for_Machine
=== RUN   TestFuzzyConversion/for_MachineSet
=== RUN   TestFuzzyConversion/for_MachineDeployment
--- PASS: TestFuzzyConversion (122.54s)
    --- PASS: TestFuzzyConversion/for_Cluster (36.62s)
    --- PASS: TestFuzzyConversion/for_Machine (40.97s)
    --- PASS: TestFuzzyConversion/for_MachineSet (22.94s)
    --- PASS: TestFuzzyConversion/for_MachineDeployment (22.01s)
=== RUN   TestConvertCluster
=== RUN   TestConvertCluster/to_hub
=== RUN   TestConvertCluster/to_hub/should_convert_the_first_value_in_Status.APIEndpoints_to_Spec.ControlPlaneEndpoint
=== RUN   TestConvertCluster/from_hub
=== RUN   TestConvertCluster/from_hub/preserves_fields_from_hub_version
=== RUN   TestConvertCluster/from_hub/should_convert_Spec.ControlPlaneEndpoint_to_Status.APIEndpoints[0]
--- PASS: TestConvertCluster (0.00s)
    --- PASS: TestConvertCluster/to_hub (0.00s)
        --- PASS: TestConvertCluster/to_hub/should_convert_the_first_value_in_Status.APIEndpoints_to_Spec.ControlPlaneEndpoint (0.00s)
    --- PASS: TestConvertCluster/from_hub (0.00s)
        --- PASS: TestConvertCluster/from_hub/preserves_fields_from_hub_version (0.00s)
        --- PASS: TestConvertCluster/from_hub/should_convert_Spec.ControlPlaneEndpoint_to_Status.APIEndpoints[0] (0.00s)
=== RUN   TestConvertMachine
=== RUN   TestConvertMachine/to_hub
=== RUN   TestConvertMachine/to_hub/should_convert_the_Spec.ClusterName_from_label
=== RUN   TestConvertMachine/from_hub
=== RUN   TestConvertMachine/from_hub/preserves_fields_from_hub_version
--- PASS: TestConvertMachine (0.00s)
    --- PASS: TestConvertMachine/to_hub (0.00s)
        --- PASS: TestConvertMachine/to_hub/should_convert_the_Spec.ClusterName_from_label (0.00s)
    --- PASS: TestConvertMachine/from_hub (0.00s)
        --- PASS: TestConvertMachine/from_hub/preserves_fields_from_hub_version (0.00s)
=== RUN   TestConvertMachineSet
=== RUN   TestConvertMachineSet/to_hub
=== RUN   TestConvertMachineSet/to_hub/should_convert_the_Spec.ClusterName_from_label
=== RUN   TestConvertMachineSet/from_hub
=== RUN   TestConvertMachineSet/from_hub/preserves_field_from_hub_version
--- PASS: TestConvertMachineSet (0.00s)
    --- PASS: TestConvertMachineSet/to_hub (0.00s)
        --- PASS: TestConvertMachineSet/to_hub/should_convert_the_Spec.ClusterName_from_label (0.00s)
    --- PASS: TestConvertMachineSet/from_hub (0.00s)
        --- PASS: TestConvertMachineSet/from_hub/preserves_field_from_hub_version (0.00s)
=== RUN   TestConvertMachineDeployment
=== RUN   TestConvertMachineDeployment/to_hub
=== RUN   TestConvertMachineDeployment/to_hub/should_convert_the_Spec.ClusterName_from_label
=== RUN   TestConvertMachineDeployment/to_hub/should_convert_the_annotations
=== RUN   TestConvertMachineDeployment/from_hub
=== RUN   TestConvertMachineDeployment/from_hub/preserves_fields_from_hub_version
=== RUN   TestConvertMachineDeployment/from_hub/should_convert_the_annotations
--- PASS: TestConvertMachineDeployment (0.00s)
    --- PASS: TestConvertMachineDeployment/to_hub (0.00s)
        --- PASS: TestConvertMachineDeployment/to_hub/should_convert_the_Spec.ClusterName_from_label (0.00s)
        --- PASS: TestConvertMachineDeployment/to_hub/should_convert_the_annotations (0.00s)
    --- PASS: TestConvertMachineDeployment/from_hub (0.00s)
        --- PASS: TestConvertMachineDeployment/from_hub/preserves_fields_from_hub_version (0.00s)
        --- PASS: TestConvertMachineDeployment/from_hub/should_convert_the_annotations (0.00s)
PASS
=== RUN   TestClusterDefault
--- PASS: TestClusterDefault (0.00s)
=== RUN   TestClusterValidation
=== RUN   TestClusterValidation/should_return_error_when_cluster_namespace_and_infrastructure_ref_namespace_mismatch
=== RUN   TestClusterValidation/should_return_error_when_cluster_namespace_and_controlplane_ref_namespace_mismatch
=== RUN   TestClusterValidation/should_succeed_when_namespaces_match
--- PASS: TestClusterValidation (0.00s)
    --- PASS: TestClusterValidation/should_return_error_when_cluster_namespace_and_infrastructure_ref_namespace_mismatch (0.00s)
    --- PASS: TestClusterValidation/should_return_error_when_cluster_namespace_and_controlplane_ref_namespace_mismatch (0.00s)
    --- PASS: TestClusterValidation/should_succeed_when_namespaces_match (0.00s)
=== RUN   TestMachineDefault
--- PASS: TestMachineDefault (0.00s)
=== RUN   TestMachineBootstrapValidation
=== RUN   TestMachineBootstrapValidation/should_return_error_if_configref_and_data_are_nil
=== RUN   TestMachineBootstrapValidation/should_not_return_error_if_dataSecretName_is_set
=== RUN   TestMachineBootstrapValidation/should_not_return_error_if_config_ref_is_set
--- PASS: TestMachineBootstrapValidation (0.00s)
    --- PASS: TestMachineBootstrapValidation/should_return_error_if_configref_and_data_are_nil (0.00s)
    --- PASS: TestMachineBootstrapValidation/should_not_return_error_if_dataSecretName_is_set (0.00s)
    --- PASS: TestMachineBootstrapValidation/should_not_return_error_if_config_ref_is_set (0.00s)
=== RUN   TestMachineNamespaceValidation
=== RUN   TestMachineNamespaceValidation/should_succeed_if_all_namespaces_match
=== RUN   TestMachineNamespaceValidation/should_return_error_if_namespace_and_bootstrap_namespace_don't_match
=== RUN   TestMachineNamespaceValidation/should_return_error_if_namespace_and_infrastructure_ref_namespace_don't_match
=== RUN   TestMachineNamespaceValidation/should_return_error_if_no_namespaces_match
--- PASS: TestMachineNamespaceValidation (0.00s)
    --- PASS: TestMachineNamespaceValidation/should_succeed_if_all_namespaces_match (0.00s)
    --- PASS: TestMachineNamespaceValidation/should_return_error_if_namespace_and_bootstrap_namespace_don't_match (0.00s)
    --- PASS: TestMachineNamespaceValidation/should_return_error_if_namespace_and_infrastructure_ref_namespace_don't_match (0.00s)
    --- PASS: TestMachineNamespaceValidation/should_return_error_if_no_namespaces_match (0.00s)
=== RUN   TestMachineClusterNameImmutable
=== RUN   TestMachineClusterNameImmutable/when_the_cluster_name_has_not_changed
=== RUN   TestMachineClusterNameImmutable/when_the_cluster_name_has_changed
--- PASS: TestMachineClusterNameImmutable (0.00s)
    --- PASS: TestMachineClusterNameImmutable/when_the_cluster_name_has_not_changed (0.00s)
    --- PASS: TestMachineClusterNameImmutable/when_the_cluster_name_has_changed (0.00s)
=== RUN   TestMachineVersionValidation
=== RUN   TestMachineVersionValidation/should_succeed_when_given_a_valid_semantic_version_with_prepended_'v'
=== RUN   TestMachineVersionValidation/should_return_error_when_given_a_valid_semantic_version_without_'v'
=== RUN   TestMachineVersionValidation/should_return_error_when_given_an_invalid_semantic_version
=== RUN   TestMachineVersionValidation/should_return_error_when_given_an_invalid_semantic_version#01
=== RUN   TestMachineVersionValidation/should_return_error_when_given_an_invalid_semantic_version#02
--- PASS: TestMachineVersionValidation (0.00s)
    --- PASS: TestMachineVersionValidation/should_succeed_when_given_a_valid_semantic_version_with_prepended_'v' (0.00s)
    --- PASS: TestMachineVersionValidation/should_return_error_when_given_a_valid_semantic_version_without_'v' (0.00s)
    --- PASS: TestMachineVersionValidation/should_return_error_when_given_an_invalid_semantic_version (0.00s)
    --- PASS: TestMachineVersionValidation/should_return_error_when_given_an_invalid_semantic_version#01 (0.00s)
    --- PASS: TestMachineVersionValidation/should_return_error_when_given_an_invalid_semantic_version#02 (0.00s)
=== RUN   TestMachineDeploymentDefault
--- PASS: TestMachineDeploymentDefault (0.00s)
=== RUN   TestMachineDeploymentValidation
=== RUN   TestMachineDeploymentValidation/should_return_error_on_mismatch
=== RUN   TestMachineDeploymentValidation/should_return_error_on_missing_labels
=== RUN   TestMachineDeploymentValidation/should_return_error_if_all_selectors_don't_match
=== RUN   TestMachineDeploymentValidation/should_not_return_error_on_match
=== RUN   TestMachineDeploymentValidation/should_return_error_for_invalid_selector
--- PASS: TestMachineDeploymentValidation (0.00s)
    --- PASS: TestMachineDeploymentValidation/should_return_error_on_mismatch (0.00s)
    --- PASS: TestMachineDeploymentValidation/should_return_error_on_missing_labels (0.00s)
    --- PASS: TestMachineDeploymentValidation/should_return_error_if_all_selectors_don't_match (0.00s)
    --- PASS: TestMachineDeploymentValidation/should_not_return_error_on_match (0.00s)
    --- PASS: TestMachineDeploymentValidation/should_return_error_for_invalid_selector (0.00s)
=== RUN   TestMachineDeploymentWithSpec
--- PASS: TestMachineDeploymentWithSpec (0.00s)
=== RUN   TestMachineDeploymentClusterNameImmutable
=== RUN   TestMachineDeploymentClusterNameImmutable/when_the_cluster_name_has_not_changed
=== RUN   TestMachineDeploymentClusterNameImmutable/when_the_cluster_name_has_changed
--- PASS: TestMachineDeploymentClusterNameImmutable (0.00s)
    --- PASS: TestMachineDeploymentClusterNameImmutable/when_the_cluster_name_has_not_changed (0.00s)
    --- PASS: TestMachineDeploymentClusterNameImmutable/when_the_cluster_name_has_changed (0.00s)
=== RUN   TestMachineHealthCheckDefault
--- PASS: TestMachineHealthCheckDefault (0.00s)
=== RUN   TestMachineHealthCheckLabelSelectorAsSelectorValidation
=== RUN   TestMachineHealthCheckLabelSelectorAsSelectorValidation/should_not_return_error_for_valid_selector
=== RUN   TestMachineHealthCheckLabelSelectorAsSelectorValidation/should_return_error_for_invalid_selector
--- PASS: TestMachineHealthCheckLabelSelectorAsSelectorValidation (0.00s)
    --- PASS: TestMachineHealthCheckLabelSelectorAsSelectorValidation/should_not_return_error_for_valid_selector (0.00s)
    --- PASS: TestMachineHealthCheckLabelSelectorAsSelectorValidation/should_return_error_for_invalid_selector (0.00s)
=== RUN   TestMachineHealthCheckClusterNameImmutable
=== RUN   TestMachineHealthCheckClusterNameImmutable/when_the_cluster_name_has_not_changed
=== RUN   TestMachineHealthCheckClusterNameImmutable/when_the_cluster_name_has_changed
--- PASS: TestMachineHealthCheckClusterNameImmutable (0.00s)
    --- PASS: TestMachineHealthCheckClusterNameImmutable/when_the_cluster_name_has_not_changed (0.00s)
    --- PASS: TestMachineHealthCheckClusterNameImmutable/when_the_cluster_name_has_changed (0.00s)
=== RUN   TestMachineHealthCheckNodeStartupTimeout
--- PASS: TestMachineHealthCheckNodeStartupTimeout (0.00s)
=== RUN   TestMachineHealthCheckMaxUnhealthy
--- PASS: TestMachineHealthCheckMaxUnhealthy (0.00s)
=== RUN   TestMachineHealthCheckSelectorValidation
--- PASS: TestMachineHealthCheckSelectorValidation (0.00s)
=== RUN   TestMachineHealthCheckClusterNameSelectorValidation
--- PASS: TestMachineHealthCheckClusterNameSelectorValidation (0.00s)
=== RUN   TestMachineSetDefault
--- PASS: TestMachineSetDefault (0.00s)
=== RUN   TestMachineSetLabelSelectorMatchValidation
=== RUN   TestMachineSetLabelSelectorMatchValidation/should_return_error_on_mismatch
=== RUN   TestMachineSetLabelSelectorMatchValidation/should_return_error_on_missing_labels
=== RUN   TestMachineSetLabelSelectorMatchValidation/should_return_error_if_all_selectors_don't_match
=== RUN   TestMachineSetLabelSelectorMatchValidation/should_not_return_error_on_match
=== RUN   TestMachineSetLabelSelectorMatchValidation/should_return_error_for_invalid_selector
--- PASS: TestMachineSetLabelSelectorMatchValidation (0.00s)
    --- PASS: TestMachineSetLabelSelectorMatchValidation/should_return_error_on_mismatch (0.00s)
    --- PASS: TestMachineSetLabelSelectorMatchValidation/should_return_error_on_missing_labels (0.00s)
    --- PASS: TestMachineSetLabelSelectorMatchValidation/should_return_error_if_all_selectors_don't_match (0.00s)
    --- PASS: TestMachineSetLabelSelectorMatchValidation/should_not_return_error_on_match (0.00s)
    --- PASS: TestMachineSetLabelSelectorMatchValidation/should_return_error_for_invalid_selector (0.00s)
=== RUN   TestMachineSetClusterNameImmutable
=== RUN   TestMachineSetClusterNameImmutable/when_the_cluster_name_has_not_changed
=== RUN   TestMachineSetClusterNameImmutable/when_the_cluster_name_has_changed
--- PASS: TestMachineSetClusterNameImmutable (0.00s)
    --- PASS: TestMachineSetClusterNameImmutable/when_the_cluster_name_has_not_changed (0.00s)
    --- PASS: TestMachineSetClusterNameImmutable/when_the_cluster_name_has_changed (0.00s)
PASS
=== RUN   TestConvertKubeadmConfig
=== RUN   TestConvertKubeadmConfig/from_hub
=== RUN   TestConvertKubeadmConfig/from_hub/preserves_fields_from_hub_version
--- PASS: TestConvertKubeadmConfig (0.01s)
    --- PASS: TestConvertKubeadmConfig/from_hub (0.00s)
        --- PASS: TestConvertKubeadmConfig/from_hub/preserves_fields_from_hub_version (0.00s)
PASS
[1594381681] [1mv1alpha3 Suite[0m - 0/0 specs 
 [32mSUCCESS![0m 300.884Âµs PASS
E0710 13:50:28.710698   39804 kubeadmconfig_controller.go:157]  "msg"="Failed to get owner" "error"="failed to retrieve Machine external object \"default\"/\"machine\": machines.cluster.x-k8s.io \"machine\" not found" "kubeadmconfig"={"Namespace":"default","Name":"cfg"} 
I0710 13:50:28.713092   39804 kubeadmconfig_controller.go:174]  "msg"="Cluster does not exist yet, waiting until it is created" "kind"="Machine" "kubeadmconfig"={"Namespace":"default","Name":"cfg"} "name"="machine" "version"="1" 
I0710 13:50:28.727021   39804 kubeadmconfig_controller.go:225]  "msg"="Cluster infrastructure is not ready, waiting" "kind"="Machine" "kubeadmconfig"={"Namespace":"default","Name":"cfg"} "name"="machine" "version"="1" 
I0710 13:50:28.732716   39804 kubeadmconfig_controller.go:174]  "msg"="Cluster does not exist yet, waiting until it is created" "kind"="Machine" "kubeadmconfig"={"Namespace":"default","Name":"cfg"} "name"="machine" "version"="1" 
I0710 13:50:28.734372   39804 kubeadmconfig_controller.go:174]  "msg"="Cluster does not exist yet, waiting until it is created" "kind"="Machine" "kubeadmconfig"={"Namespace":"default","Name":"cfg"} "name"="machine" "version"="1" 
I0710 13:50:28.736044   39804 kubeadmconfig_controller.go:174]  "msg"="Cluster does not exist yet, waiting until it is created" "kind"="Machine" "kubeadmconfig"={"Namespace":"default","Name":"cfg"} "name"="machine" "version"="1" 
I0710 13:50:28.744893   39804 kubeadmconfig_controller.go:310]  "msg"="Control plane is not ready, requeing joining control planes until ready." "kind"="Machine" "kubeadmconfig"={"Namespace":"default","Name":"control-plane-join-cfg"} "name"="control-plane-join-machine" "version"="1" 
I0710 13:50:31.514591   39804 kubeadmconfig_controller.go:335]  "msg"="Creating BootstrapData for the init control plane" "kind"="Machine" "kubeadmconfig"={"Namespace":"default","Name":"control-plane-init-cfg"} "name"="control-plane-init-machine" "version"="1" 
I0710 13:50:31.517040   39804 kubeadmconfig_controller.go:770]  "msg"="Altering ClusterConfiguration" "kubeadmconfig"="default/control-plane-init-cfg" "ClusterName"="cluster"
I0710 13:50:33.202000   39804 kubeadmconfig_controller.go:726]  "msg"="Altering JoinConfiguration.Discovery.BootstrapToken" "kubeadmconfig"="default/control-plane-join-cfg" "APIServerEndpoint"="100.105.150.1:6443"
I0710 13:50:33.202128   39804 kubeadmconfig_controller.go:742]  "msg"="Altering JoinConfiguration.Discovery.BootstrapToken" "kubeadmconfig"="default/control-plane-join-cfg" "Token"="ahef3n.oryusulj2g5njwd7"
I0710 13:50:33.204225   39804 kubeadmconfig_controller.go:542]  "msg"="Creating BootstrapData for the join control plane" "kind"="Machine" "kubeadmconfig"={"Namespace":"default","Name":"control-plane-join-cfg"} "name"="control-plane-join-machine" "version"="1" 
I0710 13:50:34.342315   39804 kubeadmconfig_controller.go:447]  "msg"="Waiting for Cluster Controller to set Cluster.Spec.ControlPlaneEndpoint: requeue in 10s" "kind"="Machine" "kubeadmconfig"={"Namespace":"default","Name":"worker-join-cfg"} "name"="worker-machine" "version"="1" 
I0710 13:50:36.709891   39804 kubeadmconfig_controller.go:726]  "msg"="Altering JoinConfiguration.Discovery.BootstrapToken" "kubeadmconfig"="default/worker-join-cfg" "APIServerEndpoint"="100.105.150.1:6443"
I0710 13:50:36.710007   39804 kubeadmconfig_controller.go:742]  "msg"="Altering JoinConfiguration.Discovery.BootstrapToken" "kubeadmconfig"="default/worker-join-cfg" "Token"="v0v9lx.pj9h4qbt07ibq8qa"
I0710 13:50:36.710956   39804 kubeadmconfig_controller.go:463]  "msg"="Creating BootstrapData for the worker node" "kind"="Machine" "kubeadmconfig"={"Namespace":"default","Name":"worker-join-cfg"} "name"="worker-machine" "version"="1" 
I0710 13:50:38.932193   39804 kubeadmconfig_controller.go:282]  "msg"="Creating default JoinConfiguration" "kind"="Machine" "kubeadmconfig"={"Namespace":"default","Name":"worker-join-cfg"} "name"="worker-machine" "version"="1" 
I0710 13:50:38.933773   39804 kubeadmconfig_controller.go:726]  "msg"="Altering JoinConfiguration.Discovery.BootstrapToken" "kubeadmconfig"="default/worker-join-cfg" "APIServerEndpoint"="100.105.150.1:6443"
I0710 13:50:38.933886   39804 kubeadmconfig_controller.go:742]  "msg"="Altering JoinConfiguration.Discovery.BootstrapToken" "kubeadmconfig"="default/worker-join-cfg" "Token"="9bp4yt.jj4zntb1k7kso5uo"
I0710 13:50:38.935111   39804 kubeadmconfig_controller.go:463]  "msg"="Creating BootstrapData for the worker node" "kind"="Machine" "kubeadmconfig"={"Namespace":"default","Name":"worker-join-cfg"} "name"="worker-machine" "version"="1" 
I0710 13:50:41.508957   39804 kubeadmconfig_controller.go:726]  "msg"="Altering JoinConfiguration.Discovery.BootstrapToken" "kubeadmconfig"="default/control-plane-join-cfg" "APIServerEndpoint"="100.105.150.1:6443"
I0710 13:50:41.509075   39804 kubeadmconfig_controller.go:742]  "msg"="Altering JoinConfiguration.Discovery.BootstrapToken" "kubeadmconfig"="default/control-plane-join-cfg" "Token"="iq7jpi.nc8zqyl4dxmu3y1q"
I0710 13:50:41.510249   39804 kubeadmconfig_controller.go:542]  "msg"="Creating BootstrapData for the join control plane" "kind"="Machine" "kubeadmconfig"={"Namespace":"default","Name":"control-plane-join-cfg"} "name"="control-plane-join-machine" "version"="1" 
I0710 13:50:43.005106   39804 kubeadmconfig_controller.go:282]  "msg"="Creating default JoinConfiguration" "kind"="Machine" "kubeadmconfig"={"Namespace":"default","Name":"control-plane-join-cfg"} "name"="control-plane-join-machine" "version"="1" 
I0710 13:50:43.009970   39804 kubeadmconfig_controller.go:726]  "msg"="Altering JoinConfiguration.Discovery.BootstrapToken" "kubeadmconfig"="default/control-plane-join-cfg" "APIServerEndpoint"="100.105.150.1:6443"
I0710 13:50:43.010081   39804 kubeadmconfig_controller.go:742]  "msg"="Altering JoinConfiguration.Discovery.BootstrapToken" "kubeadmconfig"="default/control-plane-join-cfg" "Token"="906kqw.1egi2xhpat1zzvbw"
I0710 13:50:43.011299   39804 kubeadmconfig_controller.go:542]  "msg"="Creating BootstrapData for the join control plane" "kind"="Machine" "kubeadmconfig"={"Namespace":"default","Name":"control-plane-join-cfg"} "name"="control-plane-join-machine" "version"="1" 
I0710 13:50:44.837857   39804 kubeadmconfig_controller.go:726]  "msg"="Altering JoinConfiguration.Discovery.BootstrapToken" "kubeadmconfig"="default/workerpool-join-cfg" "APIServerEndpoint"="100.105.150.1:6443"
I0710 13:50:44.837977   39804 kubeadmconfig_controller.go:742]  "msg"="Altering JoinConfiguration.Discovery.BootstrapToken" "kubeadmconfig"="default/workerpool-join-cfg" "Token"="un6fls.ev29wwittf15dnlz"
I0710 13:50:44.838953   39804 kubeadmconfig_controller.go:463]  "msg"="Creating BootstrapData for the worker node" "kind"="MachinePool" "kubeadmconfig"={"Namespace":"default","Name":"workerpool-join-cfg"} "name"="worker-machinepool" "version"="1" 
I0710 13:50:46.586115   39804 kubeadmconfig_controller.go:282]  "msg"="Creating default JoinConfiguration" "kind"="MachinePool" "kubeadmconfig"={"Namespace":"default","Name":"workerpool-join-cfg"} "name"="worker-machinepool" "version"="1" 
I0710 13:50:46.587570   39804 kubeadmconfig_controller.go:726]  "msg"="Altering JoinConfiguration.Discovery.BootstrapToken" "kubeadmconfig"="default/workerpool-join-cfg" "APIServerEndpoint"="100.105.150.1:6443"
I0710 13:50:46.587677   39804 kubeadmconfig_controller.go:742]  "msg"="Altering JoinConfiguration.Discovery.BootstrapToken" "kubeadmconfig"="default/workerpool-join-cfg" "Token"="7onqe2.jfn4dq0rt9gl3y5f"
I0710 13:50:46.588707   39804 kubeadmconfig_controller.go:463]  "msg"="Creating BootstrapData for the worker node" "kind"="MachinePool" "kubeadmconfig"={"Namespace":"default","Name":"workerpool-join-cfg"} "name"="worker-machinepool" "version"="1" 
I0710 13:50:50.526410   39804 kubeadmconfig_controller.go:726]  "msg"="Altering JoinConfiguration.Discovery.BootstrapToken" "kubeadmconfig"="default/worker-join-cfg" "APIServerEndpoint"="100.105.150.1:6443"
I0710 13:50:50.526564   39804 kubeadmconfig_controller.go:742]  "msg"="Altering JoinConfiguration.Discovery.BootstrapToken" "kubeadmconfig"="default/worker-join-cfg" "Token"="vuv6dr.oz73sf21nvqgyph7"
I0710 13:50:50.527794   39804 kubeadmconfig_controller.go:463]  "msg"="Creating BootstrapData for the worker node" "kind"="Machine" "kubeadmconfig"={"Namespace":"default","Name":"worker-join-cfg"} "name"="worker-machine" "version"="1" 
I0710 13:50:50.532470   39804 kubeadmconfig_controller.go:832]  "msg"="bootstrap data secret for KubeadmConfig already exists"  "KubeadmConfig"="worker-join-cfg" "secret"="worker-join-cfg"
I0710 13:50:52.839533   39804 kubeadmconfig_controller.go:726]  "msg"="Altering JoinConfiguration.Discovery.BootstrapToken" "kubeadmconfig"="default/worker-join-cfg" "APIServerEndpoint"="100.105.150.1:6443"
I0710 13:50:52.839694   39804 kubeadmconfig_controller.go:742]  "msg"="Altering JoinConfiguration.Discovery.BootstrapToken" "kubeadmconfig"="default/worker-join-cfg" "Token"="um3ozr.yapeivmxz5rtfgry"
I0710 13:50:52.840735   39804 kubeadmconfig_controller.go:463]  "msg"="Creating BootstrapData for the worker node" "kind"="Machine" "kubeadmconfig"={"Namespace":"default","Name":"worker-join-cfg"} "name"="worker-machine" "version"="1" 
I0710 13:50:52.858354   39804 kubeadmconfig_controller.go:726]  "msg"="Altering JoinConfiguration.Discovery.BootstrapToken" "kubeadmconfig"="default/control-plane-join-cfg" "APIServerEndpoint"="100.105.150.1:6443"
I0710 13:50:52.858474   39804 kubeadmconfig_controller.go:742]  "msg"="Altering JoinConfiguration.Discovery.BootstrapToken" "kubeadmconfig"="default/control-plane-join-cfg" "Token"="e66uey.lqe4y4t9hftur10r"
I0710 13:50:52.859618   39804 kubeadmconfig_controller.go:542]  "msg"="Creating BootstrapData for the join control plane" "kind"="Machine" "kubeadmconfig"={"Namespace":"default","Name":"control-plane-join-cfg"} "name"="control-plane-join-machine" "version"="1" 
I0710 13:50:53.875660   39804 kubeadmconfig_controller.go:255]  "msg"="Refreshing token until the infrastructure has a chance to consume it" "kind"="Machine" "kubeadmconfig"={"Namespace":"default","Name":"worker-join-cfg"} "name"="worker-machine" "version"="1" 
I0710 13:50:53.878086   39804 kubeadmconfig_controller.go:255]  "msg"="Refreshing token until the infrastructure has a chance to consume it" "kind"="Machine" "kubeadmconfig"={"Namespace":"default","Name":"control-plane-join-cfg"} "name"="control-plane-join-machine" "version"="1" 
I0710 13:50:54.889849   39804 kubeadmconfig_controller.go:726]  "msg"="Altering JoinConfiguration.Discovery.BootstrapToken" "kubeadmconfig"="/" "APIServerEndpoint"="example.com:6443"
I0710 13:50:54.889995   39804 kubeadmconfig_controller.go:742]  "msg"="Altering JoinConfiguration.Discovery.BootstrapToken" "kubeadmconfig"="/" "Token"="1ihzx9.33hvvecmy52bac6e"
I0710 13:50:54.890583   39804 kubeadmconfig_controller.go:742]  "msg"="Altering JoinConfiguration.Discovery.BootstrapToken" "kubeadmconfig"="/" "Token"="7nh7b9.6tgmudevgu74d1wr"
I0710 13:50:54.890814   39804 kubeadmconfig_controller.go:726]  "msg"="Altering JoinConfiguration.Discovery.BootstrapToken" "kubeadmconfig"="/" "APIServerEndpoint"="example.com:6443"
I0710 13:50:54.891066   39804 kubeadmconfig_controller.go:726]  "msg"="Altering JoinConfiguration.Discovery.BootstrapToken" "kubeadmconfig"="/" "APIServerEndpoint"="example.com:6443"
I0710 13:50:54.891199   39804 kubeadmconfig_controller.go:742]  "msg"="Altering JoinConfiguration.Discovery.BootstrapToken" "kubeadmconfig"="/" "Token"="1ut0ju.x9h51jezzwn1k6yx"
I0710 13:50:54.891948   39804 kubeadmconfig_controller.go:764]  "msg"="Altering ClusterConfiguration" "kubeadmconfig"="/" "ControlPlaneEndpoint"="myControlPlaneEndpoint:6443"
I0710 13:50:54.892001   39804 kubeadmconfig_controller.go:770]  "msg"="Altering ClusterConfiguration" "kubeadmconfig"="/" "ClusterName"="mycluster"
I0710 13:50:54.892045   39804 kubeadmconfig_controller.go:777]  "msg"="Altering ClusterConfiguration" "kubeadmconfig"="/" "DNSDomain"="myDNSDomain"
I0710 13:50:54.892087   39804 kubeadmconfig_controller.go:783]  "msg"="Altering ClusterConfiguration" "kubeadmconfig"="/" "ServiceSubnet"="myServiceSubnet"
I0710 13:50:54.892129   39804 kubeadmconfig_controller.go:789]  "msg"="Altering ClusterConfiguration" "kubeadmconfig"="/" "PodSubnet"="myPodSubnet"
I0710 13:50:54.892170   39804 kubeadmconfig_controller.go:796]  "msg"="Altering ClusterConfiguration" "kubeadmconfig"="/" "KubernetesVersion"="myversion"
I0710 13:50:57.057889   39804 kubeadmconfig_controller.go:726]  "msg"="Altering JoinConfiguration.Discovery.BootstrapToken" "kubeadmconfig"="default/worker-join-cfg" "APIServerEndpoint"="example.com:6443"
I0710 13:50:57.058069   39804 kubeadmconfig_controller.go:742]  "msg"="Altering JoinConfiguration.Discovery.BootstrapToken" "kubeadmconfig"="default/worker-join-cfg" "Token"="rnqm53.y2wmm0y2puwxnft0"
I0710 13:50:57.058960   39804 kubeadmconfig_controller.go:463]  "msg"="Creating BootstrapData for the worker node" "kind"="Machine" "kubeadmconfig"={"Namespace":"default","Name":"worker-join-cfg"} "name"="my-worker" "version"="1" 
I0710 13:50:57.073833   39804 kubeadmconfig_controller.go:726]  "msg"="Altering JoinConfiguration.Discovery.BootstrapToken" "kubeadmconfig"="default/worker-join-cfg" "APIServerEndpoint"="example.com:6443"
I0710 13:50:57.073946   39804 kubeadmconfig_controller.go:742]  "msg"="Altering JoinConfiguration.Discovery.BootstrapToken" "kubeadmconfig"="default/worker-join-cfg" "Token"="ffgkeh.7poim4s35o02agqj"
I0710 13:50:57.074792   39804 kubeadmconfig_controller.go:463]  "msg"="Creating BootstrapData for the worker node" "kind"="Machine" "kubeadmconfig"={"Namespace":"default","Name":"worker-join-cfg"} "name"="my-worker" "version"="1" 
I0710 13:50:57.087039   39804 kubeadmconfig_controller.go:726]  "msg"="Altering JoinConfiguration.Discovery.BootstrapToken" "kubeadmconfig"="default/worker-join-cfg" "APIServerEndpoint"="example.com:6443"
I0710 13:50:57.087146   39804 kubeadmconfig_controller.go:742]  "msg"="Altering JoinConfiguration.Discovery.BootstrapToken" "kubeadmconfig"="default/worker-join-cfg" "Token"="gd3i7k.ku0ciw76naf3upz9"
I0710 13:50:57.087911   39804 kubeadmconfig_controller.go:463]  "msg"="Creating BootstrapData for the worker node" "kind"="Machine" "kubeadmconfig"={"Namespace":"default","Name":"worker-join-cfg"} "name"="my-worker" "version"="1" 
I0710 13:50:57.104238   39804 kubeadmconfig_controller.go:335]  "msg"="Creating BootstrapData for the init control plane" "kind"="Machine" "kubeadmconfig"={"Namespace":"default","Name":"my-config"} "name"="control-plane-machine" "version"="1" 
I0710 13:50:57.104850   39804 kubeadmconfig_controller.go:770]  "msg"="Altering ClusterConfiguration" "kubeadmconfig"="default/my-config" "ClusterName"="my-cluster"
I0710 13:50:58.545730   39804 kubeadmconfig_controller.go:335]  "msg"="Creating BootstrapData for the init control plane" "kind"="Machine" "kubeadmconfig"={"Namespace":"default","Name":"control-plane-init-cfg-first"} "name"="control-plane-init-machine-first" "version"="1" 
I0710 13:50:58.546666   39804 kubeadmconfig_controller.go:770]  "msg"="Altering ClusterConfiguration" "kubeadmconfig"="default/control-plane-init-cfg-first" "ClusterName"="cluster"
I0710 13:51:00.297511   39804 kubeadmconfig_controller.go:323]  "msg"="A control plane is already being initialized, requeing until control plane is ready" "kind"="Machine" "kubeadmconfig"={"Namespace":"default","Name":"control-plane-init-cfg-second"} "name"="control-plane-init-machine-second" "version"="1" 
I0710 13:51:01.426819   39804 kubeadmconfig_controller.go:335]  "msg"="Creating BootstrapData for the init control plane" "kind"="Machine" "kubeadmconfig"={"Namespace":"default","Name":"control-plane-init-cfg"} "name"="control-plane-init-machine" "version"="1" 
I0710 13:51:01.427418   39804 kubeadmconfig_controller.go:770]  "msg"="Altering ClusterConfiguration" "kubeadmconfig"="default/control-plane-init-cfg" "ClusterName"="cluster"
[1594381681] [1mController Suite[0m - 1/1 specs I0710 13:51:10.751535   39804 webhook.go:102] controller-runtime/builder "msg"="Registering a mutating webhook"  "GVK"={"Group":"cluster.x-k8s.io","Version":"v1alpha3","Kind":"Cluster"} "path"="/mutate-cluster-x-k8s-io-v1alpha3-cluster"
I0710 13:51:10.751649   39804 server.go:121] controller-runtime/webhook "msg"="registering webhook"  "path"="/mutate-cluster-x-k8s-io-v1alpha3-cluster"
I0710 13:51:10.751755   39804 webhook.go:123] controller-runtime/builder "msg"="Registering a validating webhook"  "GVK"={"Group":"cluster.x-k8s.io","Version":"v1alpha3","Kind":"Cluster"} "path"="/validate-cluster-x-k8s-io-v1alpha3-cluster"
I0710 13:51:10.751805   39804 server.go:121] controller-runtime/webhook "msg"="registering webhook"  "path"="/validate-cluster-x-k8s-io-v1alpha3-cluster"
I0710 13:51:10.752120   39804 webhook.go:102] controller-runtime/builder "msg"="Registering a mutating webhook"  "GVK"={"Group":"cluster.x-k8s.io","Version":"v1alpha3","Kind":"Machine"} "path"="/mutate-cluster-x-k8s-io-v1alpha3-machine"
I0710 13:51:10.752204   39804 server.go:121] controller-runtime/webhook "msg"="registering webhook"  "path"="/mutate-cluster-x-k8s-io-v1alpha3-machine"
I0710 13:51:10.752305   39804 webhook.go:123] controller-runtime/builder "msg"="Registering a validating webhook"  "GVK"={"Group":"cluster.x-k8s.io","Version":"v1alpha3","Kind":"Machine"} "path"="/validate-cluster-x-k8s-io-v1alpha3-machine"
I0710 13:51:10.752364   39804 server.go:121] controller-runtime/webhook "msg"="registering webhook"  "path"="/validate-cluster-x-k8s-io-v1alpha3-machine"
I0710 13:51:10.752538   39804 webhook.go:102] controller-runtime/builder "msg"="Registering a mutating webhook"  "GVK"={"Group":"cluster.x-k8s.io","Version":"v1alpha3","Kind":"MachineHealthCheck"} "path"="/mutate-cluster-x-k8s-io-v1alpha3-machinehealthcheck"
I0710 13:51:10.752591   39804 server.go:121] controller-runtime/webhook "msg"="registering webhook"  "path"="/mutate-cluster-x-k8s-io-v1alpha3-machinehealthcheck"
I0710 13:51:10.752690   39804 webhook.go:123] controller-runtime/builder "msg"="Registering a validating webhook"  "GVK"={"Group":"cluster.x-k8s.io","Version":"v1alpha3","Kind":"MachineHealthCheck"} "path"="/validate-cluster-x-k8s-io-v1alpha3-machinehealthcheck"
I0710 13:51:10.752741   39804 server.go:121] controller-runtime/webhook "msg"="registering webhook"  "path"="/validate-cluster-x-k8s-io-v1alpha3-machinehealthcheck"
I0710 13:51:10.753090   39804 webhook.go:102] controller-runtime/builder "msg"="Registering a mutating webhook"  "GVK"={"Group":"cluster.x-k8s.io","Version":"v1alpha3","Kind":"MachineSet"} "path"="/mutate-cluster-x-k8s-io-v1alpha3-machineset"
I0710 13:51:10.753163   39804 server.go:121] controller-runtime/webhook "msg"="registering webhook"  "path"="/mutate-cluster-x-k8s-io-v1alpha3-machineset"
I0710 13:51:10.753251   39804 webhook.go:123] controller-runtime/builder "msg"="Registering a validating webhook"  "GVK"={"Group":"cluster.x-k8s.io","Version":"v1alpha3","Kind":"MachineSet"} "path"="/validate-cluster-x-k8s-io-v1alpha3-machineset"
I0710 13:51:10.753293   39804 server.go:121] controller-runtime/webhook "msg"="registering webhook"  "path"="/validate-cluster-x-k8s-io-v1alpha3-machineset"
I0710 13:51:10.753541   39804 webhook.go:102] controller-runtime/builder "msg"="Registering a mutating webhook"  "GVK"={"Group":"cluster.x-k8s.io","Version":"v1alpha3","Kind":"MachineDeployment"} "path"="/mutate-cluster-x-k8s-io-v1alpha3-machinedeployment"
I0710 13:51:10.753608   39804 server.go:121] controller-runtime/webhook "msg"="registering webhook"  "path"="/mutate-cluster-x-k8s-io-v1alpha3-machinedeployment"
I0710 13:51:10.753764   39804 webhook.go:123] controller-runtime/builder "msg"="Registering a validating webhook"  "GVK"={"Group":"cluster.x-k8s.io","Version":"v1alpha3","Kind":"MachineDeployment"} "path"="/validate-cluster-x-k8s-io-v1alpha3-machinedeployment"
I0710 13:51:10.753823   39804 server.go:121] controller-runtime/webhook "msg"="registering webhook"  "path"="/validate-cluster-x-k8s-io-v1alpha3-machinedeployment"
I0710 13:51:10.753960   39804 webhook.go:92] controller-runtime/builder "msg"="skip registering a mutating webhook, admission.Defaulter interface is not implemented"  "GVK"={"Group":"bootstrap.cluster.x-k8s.io","Version":"v1alpha3","Kind":"KubeadmConfig"}
I0710 13:51:10.754074   39804 webhook.go:123] controller-runtime/builder "msg"="Registering a validating webhook"  "GVK"={"Group":"bootstrap.cluster.x-k8s.io","Version":"v1alpha3","Kind":"KubeadmConfig"} "path"="/validate-bootstrap-cluster-x-k8s-io-v1alpha3-kubeadmconfig"
I0710 13:51:10.754178   39804 server.go:121] controller-runtime/webhook "msg"="registering webhook"  "path"="/validate-bootstrap-cluster-x-k8s-io-v1alpha3-kubeadmconfig"
I0710 13:51:10.754419   39804 webhook.go:92] controller-runtime/builder "msg"="skip registering a mutating webhook, admission.Defaulter interface is not implemented"  "GVK"={"Group":"bootstrap.cluster.x-k8s.io","Version":"v1alpha3","Kind":"KubeadmConfigTemplate"}
I0710 13:51:10.754475   39804 webhook.go:113] controller-runtime/builder "msg"="skip registering a validating webhook, admission.Validator interface is not implemented"  "GVK"={"Group":"bootstrap.cluster.x-k8s.io","Version":"v1alpha3","Kind":"KubeadmConfigTemplate"}
I0710 13:51:10.754632   39804 webhook.go:92] controller-runtime/builder "msg"="skip registering a mutating webhook, admission.Defaulter interface is not implemented"  "GVK"={"Group":"bootstrap.cluster.x-k8s.io","Version":"v1alpha3","Kind":"KubeadmConfigTemplateList"}
I0710 13:51:10.754687   39804 webhook.go:113] controller-runtime/builder "msg"="skip registering a validating webhook, admission.Validator interface is not implemented"  "GVK"={"Group":"bootstrap.cluster.x-k8s.io","Version":"v1alpha3","Kind":"KubeadmConfigTemplateList"}
I0710 13:51:10.754845   39804 webhook.go:102] controller-runtime/builder "msg"="Registering a mutating webhook"  "GVK"={"Group":"controlplane.cluster.x-k8s.io","Version":"v1alpha3","Kind":"KubeadmControlPlane"} "path"="/mutate-controlplane-cluster-x-k8s-io-v1alpha3-kubeadmcontrolplane"
I0710 13:51:10.754891   39804 server.go:121] controller-runtime/webhook "msg"="registering webhook"  "path"="/mutate-controlplane-cluster-x-k8s-io-v1alpha3-kubeadmcontrolplane"
I0710 13:51:10.755002   39804 webhook.go:123] controller-runtime/builder "msg"="Registering a validating webhook"  "GVK"={"Group":"controlplane.cluster.x-k8s.io","Version":"v1alpha3","Kind":"KubeadmControlPlane"} "path"="/validate-controlplane-cluster-x-k8s-io-v1alpha3-kubeadmcontrolplane"
I0710 13:51:10.755075   39804 server.go:121] controller-runtime/webhook "msg"="registering webhook"  "path"="/validate-controlplane-cluster-x-k8s-io-v1alpha3-kubeadmcontrolplane"
I0710 13:51:10.755238   39804 webhook.go:102] controller-runtime/builder "msg"="Registering a mutating webhook"  "GVK"={"Group":"addons.cluster.x-k8s.io","Version":"v1alpha3","Kind":"ClusterResourceSet"} "path"="/mutate-addons-cluster-x-k8s-io-v1alpha3-clusterresourceset"
I0710 13:51:10.755291   39804 server.go:121] controller-runtime/webhook "msg"="registering webhook"  "path"="/mutate-addons-cluster-x-k8s-io-v1alpha3-clusterresourceset"
I0710 13:51:10.755359   39804 webhook.go:123] controller-runtime/builder "msg"="Registering a validating webhook"  "GVK"={"Group":"addons.cluster.x-k8s.io","Version":"v1alpha3","Kind":"ClusterResourceSet"} "path"="/validate-addons-cluster-x-k8s-io-v1alpha3-clusterresourceset"
I0710 13:51:10.755399   39804 server.go:121] controller-runtime/webhook "msg"="registering webhook"  "path"="/validate-addons-cluster-x-k8s-io-v1alpha3-clusterresourceset"
I0710 13:51:10.756242   39804 server.go:141] controller-runtime/webhook/webhooks "msg"="starting webhook server"  
I0710 13:51:10.759762   39804 certwatcher.go:127] controller-runtime/certwatcher "msg"="Updated current TLS certificate"  
I0710 13:51:10.760585   39804 certwatcher.go:83] controller-runtime/certwatcher "msg"="Starting certificate watcher"  

[90m------------------------------[0m
[91m[1mâ€¢ Failure [0.043 seconds][0m
[90mKubeadmConfigReconciler [0m[0mReconcile a KubeadmConfig [0m[91m[1m[It] should wait until infrastructure is ready [0m
[37m/Users/bdab/Documents/tkg-CAPI-team/capi_issues/cluster-api/bootstrap/kubeadm/controllers/kubeadmconfig_controller_reconciler_test.go:37[0m

  [91mExpected success, but got an error:
      <*net.OpError | 0xc0009b4730>: {
          Op: "listen",
          Net: "tcp",
          Source: nil,
          Addr: {IP: nil, Port: 56715, Zone: ""},
          Err: {Syscall: "bind", Err: 0x30},
      }
      listen tcp :56715: bind: address already in use[0m

  /Users/bdab/Documents/tkg-CAPI-team/capi_issues/cluster-api/bootstrap/kubeadm/controllers/suite_test.go:52
[90m------------------------------[0m
[BeforeEach] KubeadmConfigReconciler
  /Users/bdab/Documents/tkg-CAPI-team/capi_issues/cluster-api/bootstrap/kubeadm/controllers/kubeadmconfig_controller_reconciler_test.go:33
[It] should wait until infrastructure is ready
  /Users/bdab/Documents/tkg-CAPI-team/capi_issues/cluster-api/bootstrap/kubeadm/controllers/kubeadmconfig_controller_reconciler_test.go:37
[AfterEach] KubeadmConfigReconciler
  /Users/bdab/Documents/tkg-CAPI-team/capi_issues/cluster-api/bootstrap/kubeadm/controllers/kubeadmconfig_controller_reconciler_test.go:34

Received interrupt.  Emitting contents of GinkgoWriter...
---------------------------------------------------------
[1mSTEP[0m: tearing down the test environment

---------------------------------------------------------
Received interrupt.  Running AfterSuite...
^C again to terminate immediately

Received second interrupt.  Shutting down.

Ginkgo ran 5 suites in 35m34.428545707s
Test Suite Failed
